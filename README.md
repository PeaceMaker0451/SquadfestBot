# SquadFestBot
Система Дискорд ботов для планирования, выдачи и обработки выполнения вруччную созанных заданий с делением на команды

## Основные функции:
### Организация нескольких Дискорд ботов как "лидеров" команд (1 и более)
Программа позволяет вам управлять несколькими ботами одновременно \
Для этого в файле `/BotsConfig.json` необходимо указать айди бота (уникальную строку - может быть любой) и токен доступа к нему по формату:
```json
[
  {
    "Id": "bot1",
    "Token": "PUT_YOUR_TOKEN_HERE"
  },
  {
    "Id": "bot2",
    "Token": "PUT_YOUR_TOKEN_HERE"
  }
] 
```
Эти боты будут выступать как лидеры команд, будут выдавать задания, принимать их на проверку, выкрикивать лозунги поддержки и т.д.\
<img width="512" height="721" alt="image" src="https://github.com/user-attachments/assets/571a7512-7bc3-4184-ad71-b3c031e50b8a" />

Для каждого бота будет созданна папка с уникальными данными этого "лидера" (`/data/{LeaderID}`) \
Каждый бот будет иметь идентичный набор комманд и интеракций, но обрабатываться они будут относительно данных в папке лидера.

Боты обновляют списки активных заданий, сообщают о добавлении новых заданий, об их полном выполнении, а так же пишут в лс игрокам о том, что их выполнение задания было одобрено или отклонено 

Бот хранит такие данные как:
- Личность (набор заготовленных фраз, которые будут появляться в выводах слеш-команд и не только) - `ПапкаЛидера/Personality.json`
- Айди чата для динамических списков заданий `ПапкаЛидера/Leader.json`
- Айди чата-флудилки (где будут сообщения об обновлении статусов заданий) `ПапкаЛидера/Leader.json`
- Список игроков в команде этого лидера. `ПапкаЛидера/Payers.json`
- Сумму очков этой команды `ПапкаЛидера/Leader.json`

СквадФестБот пытается дать максимум социального функционала
<img width="994" height="449" alt="image" src="https://github.com/user-attachments/assets/c5c17da5-1803-46e2-895e-cfd3415f7ce4" />


### Система выдачи заданий по следующим категориям: Ежедневные, Еженедельные, Сложные, Секретные
Программа реализует систему квестов, которая позволяет: 
- быстро и легко создавать и выдавать командам общие или персональные задания
- легко потоком проверять выполнения заданий участниками команд
- автоматически начислять и считать очки команд и отдельних участников
- планировать задания заранее на следующие дни/недели

Каждый квест обладает следующими задаваемыми полями:
- **Название** (`string Title`) - Публичный текст названия задания.
- **Описание** (`string Description`) - Публичный текст описания задания
- **Объяснение** (`string Explanation`) \
Поле, с информацией о задании, которая видна только проверяющим и администраторам (и никогда не видна обычным пользователям)
- **Награда** (`int Reward`) \
Число очков, которе начислится участнику команды (и в сумму очков команды, соответственно) за каждое выполнение задания.
- **Лимит выполнений** (`int CompletionLimit`) \
Число выполнений, после достижения которого квест станет выполненным.
- **Общий лимит** (`bool GlobalLimit`) \
Значение, определяющее, является ли лимит выполнений общим для всех команд, или у каждой он свой.

Задания делятся по следующим категориям:
- **Ежедневные** \
Список заданий, поделенынй на отдельные дни\
Когда наступает новый день, квесты этого дня становятся активными, а невыполненные квесты предыдущего - просроченными
- **Еженедельные** \
Список заданий, поделенынй на отдельные недели\
Когда наступает новый день, квесты этого дня становятся активными, а невыполненные квесты предыдущего - просроченными
- **Сложные** \
Бессрочные квесты, активны с момента своего добавления и до исчерпания лимита выполнения
- **Секретные** \
То же, что и **Сложные**, но в отдельной категории. Стилистическое решение.

Участник команды может отправить на проверку решение любого активного задания помощью команды `/done` \
Тогда квест попадет в канал, указанный в файле `GlobalState.json` в поле `"QuestCheckChannelId": X`
<img width="1056" height="524" alt="image" src="https://github.com/user-attachments/assets/a51bc094-cbb6-4bc2-93c2-b0cbdb8ac61c" />
Там ыполнение квеста может быть подтверждено или отклонено любым пользователем с помощью интерпктивных кнопок.

## Как быстро начать пользоваться?
Для начала работы вам необходимо скачать исполняемый файл или собрать его самому и расположить его в любой добной папке. \
Далее, все пути к файлам будут указаны относительно .exe файла (то есть "`/BotConfig.json`" - файл в той же папке, а "`/data/GlobalState.json`" в папке data) \

Запустите программу в первый раз - будут созданы основные конфиг файлы.

в файле `/BotConfig.json` укажите как минимум один токен дискорд бота (по желанию можете изменить его ID) \
Например:
```json
[
  {
    "Id": "TestBot",
    "Token": "YourTokenXjfwjofijwoe309825308"
  }
]
```

В файле `/data/GlobalState.json` заполните следующие поля:
```json
{
  "GuildId": 0, //ID гильдии, на котором вы собираетесь использовать бота
  "AdminChannelId": 0, //ID канала для отладочных сообщений (не обязательно)
  "QuestCheckChannelId": 0, //ID канала, в который будут отправлятсья решения заданий на проверку
  "QuestStartDate": "2025-07-01T00:00:00" //Таймкод стартовой точки для отсчета дней и недель 
}
```

После этого, при запуске программы на сервер будут добавлены слеш-команды (см. Слеш-Команды) \
Вы готовы к использованию СквадфестБота!

## СЛЕШ-КОМАНДЫ
список всех слеш команд ботов\
слеш-команды добавляются локально для гильдии указанной в файле `GlobalState.json` в поле `"GuildId": X`

### Пользовательские команды:

- `/ping` (ru: `/пинг`) - отправляет ответ в виде рандомной фразы лидера из **PingMessages** в **Personality** файле

- `/score` (ru: `/счет`) - выводит сообщение с счетом вашей команды \
*требует нахождения в команде лидера*
<img width="487" height="310" alt="image" src="https://github.com/user-attachments/assets/6b5b12d3-fa48-4616-ad50-f8df1183f0e7" />


- `/quests` (ru: `/задания`) - выводит список активных заданий\
**требует нахождения в команде лидера**\
  <img width="875" height="767" alt="image" src="https://github.com/user-attachments/assets/8424613c-0ff1-4996-8d2c-1c9419c98a66" />


- `/done` (ru: `/выполнить`) - позволяет отправить заявку о выполнении задания \
Параметры:\
`number` - номер задания из `/quests` списка (обязательный)\
`comment` - текстовый комментарий выполнения (обязательный)\
`file-one` - файл - доказательство выполнения 1 (не обязательный)\
`file-two` - файл - доказательство выполнения 2 (не обязательный)\
`file-three` - файл - доказательство выполнения 3 (не обязательный)\
**требует нахождения в команде лидера**

### Админские команды:

- `/say` - отправить сообщение от лица лидера\
Параметры:\
`channel-id` - ID канала для отправки сообщения (обязательный)\
`text` - текст сообщения (обязательный)\
`file` - приложение к сообщению (не обязательный)

- `/re-say` - редактировать сообщение, отправленное эти лидером\
Параметры:\
`channel-id` - ID канала, в котором находится редактируемое сообщение (обязательный)\
`message-id` - ID сообщения, которое необходимо отредактировать (обязательный)\
`text` - новый текст сообщения (обязательный)\
`file` - приложение к сообщению (не обязательный)\
<sub> примечание. 1 - если не указать **file** параметр - файл исходного сообщения не изменится, если он был.</sub>\
<sub> примечание. 2 - если у сообщения уже был приложен файл - указанный параметр **file** его заменит </sub>

- `/un-say` - удалить сообщение, отправленное эти лидером.\
Параметры:\
`channel-id` - ID канала, в котором находится удаляемое сообщение (обязательный)\
`message-id` - ID сообщения, которое необходимо удалить (обязательный)

- `/dm` - отправить сообщение от лица дилера в лс\
Параметры:\
`user` - пользователь, которому будет отправленно сообщение (обязательный)\
`text` - текст сообщения (обязательный)\
`file` - приложение к сообщению (не обязательный)

- `/re-dm` - редактировать сообщение, отправленное эти лидером пользователю в лс\
Параметры:\
`user` - пользователь, в лс которого находится сообщение (обязательный)\
`message-id` - ID сообщения, которое необходимо отредактировать (обязательный)\
`text` - новый текст сообщения (обязательный)\
`file` - приложение к сообщению (не обязательный)\
<sub> примечание. 1 - если не указать **file** параметр - файл исходного сообщения не изменится, если он был.</sub>\
<sub> примечание. 2 - если у сообщения уже был приложен файл - указанный параметр **file** его заменит</sub>

- `/un-dm` - удалить сообщение, отправленное эти лидером пользователю в лс\
Параметры:\
`user` - пользователь, в лс которого находится сообщение (обязательный)\
`message-id` - ID сообщения, которое необходимо удалить (обязательный)

- `/team add` - добавить пользователя в команду бота, на котором вызывается команда\
Параметры:\
`user` - пользователь, которого необходимо добавить в команду

- `/team remove` - удалить пользователя из команды бота, на котором вызывается команда\
Параметры:\
`user` - пользователь, которого необходимо удалить из команды

- `/quest list` - выводит админский (полный) список квестов

- `/quest update` - обновляет состояния всех квестов (состояния выполнения, просрачивания, объявления, а так же квестовые ветки)

- `quest add` - добавляет новый квест\
Параметры:\
`type` - типа квеста (Ежедневный/Еженедельный/Сложный/Секретный) (обязательный)\
`title` - названия квеста (обязательный)\
`description` - описание квеста (обязательный)\
`reward` - награда за выполнение квеста (очков) (обязательный)\
`limit` - максимальное кол-во выполнений этого квеста (обязательный)\
`day-or-week` - номер, дня или недели, в который необходимо добавить дневной или еженедельный квест, определяющий промежуток его активности (см. **/quest list**) (не обязательный, **но попытка добавления ежедневного или еженедельного квеста без этого параметра выдаст ошибку**)\
`global-limit` если true - все команды имеют **общий** лимит выполнения этого задания, иначе, у каждой он будет свой (не обязательный)\
`explanation` - админ-онли объяснения сути квеста (если из названия и описания не очевидны критерии его выполнения) - виден только в заявке на выполнение задания (не обязательный)

- `/quest edit` - редактирует существующий квест без изменения его состояния (команда не изменит, например, список выполнивших игроков)\
Параметры:\
`type` - тип редактируемого квеста (Ежедневный/Еженедельный/Сложный/Секретный) (обязательный)\
`index` - индекс задания в списке сложных/секретных квестов или внутри дня/недели для еже-дневных/недельных квестов (см. **/quest list**) (обязательный)\
 <sub>\+ все остальные параметры команды **/quest add **, перезаписывающие поля сохраненного задания (необязательные)</sub>

- `/quest remove` - удаляет существующий квест\
Параметры:\
`type` - тип редактируемого квеста (Ежедневный/Еженедельный/Сложный/Секретный) (обязательный)\
`index` - индекс задания в списке сложных/секретных квестов или внутри дня/недели для еже-дневных/недельных квестов (см. **/quest list**)(обязательный)\
`day-or-week` - номер, дня или недели, в который необходимо добавить дневной или еженедельный квест, определяющий промежуток его активности (см. **/quest list**) (не обязательный, **но попытка добавления ежедневного или еженедельного квеста без этого параметра выдаст ошибку**)
